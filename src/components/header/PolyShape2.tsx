"use client";
import React, { useEffect } from 'react'
import { imageAnimation, polyShapeAnimation } from "@/utils/animations";
import { motion, useAnimation, useInView } from "framer-motion";
import { useRef } from "react";

export default function PolyShape2() {
    const controls = useAnimation();
    const refShape = useRef(null)
    const shapeInView = useInView(refShape, { once: true });
    useEffect(() => {
        if (shapeInView) {
            controls.start('visible');
        }
    }, [controls, shapeInView]);

    return (
        <div className='personal-photo w-full'>
            <motion.svg ref={refShape} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 594 793.43" className='absolute w-full !z-30 -translate-y-[.25rem]'
                variants={imageAnimation} initial="hidden" animate={controls} transition={{
                    default: { duration: 1, delay: 1, ease: "easeInOut" }
                }}>
                <mask id="shapeImg2">
                    <path
                        d="M16.9,792.93c.77-15.16-6.26-28.15-10.64-42C7.41,737.1,3.06,725.8.5,712.89c4.33-44.84,13.94-89.32,18-134.71,4.71-41.35,21-81.22,31.1-121.51,3.07-17.63-2-36.87,14.8-47.66,17.67-9.39,26.8-31.76,36.27-48.53,36.07-34.29,121-29.1,118.1-91.57.5-7.35,8.57-12.06,13.64-17.14s18.19-2.5,13.21-12.69c-5.75-10.27-7.89-22-9.52-33.55-18.92-12.73-26.27-37.28-24.44-59.93.48-9.49,9.69-1.57,13.59-3.15-2.28-23.64-6.83-50.61,1.89-73,9.83-23.42,24.32-46.51,45-59.28C293.17,4.26,316-4.3,339.29,3.85c4.93,1.45,10.84,4.21,11.14,10,2.34,4,8.47,2.58,6.6,9.28,9.28,1.45,13.15,9.71,16.34,18.68C396.09,68.57,402.82,104,397.14,139c-.16,7.49,6.82-.11,9.57-.24,7.4,7.72,3.36,24.44,1.68,34.63-1.09,19-22.65,21.58-23.2,38.86C354.46,319,432.21,311.77,505.61,344c32.6,32.45,46.16,77.91,57.35,122,17.12,72.71,38.85,148.31,27.29,222.06-5.93,14.27,4.59,28.47.52,43.59,3.51,9.85-3.79,19.27-4.29,28.84-1.94,10.35,2.84,21.72-1.65,32.46H491.41c-5.41-43.63,1.49-89.2-14.71-131.78-17.73,42.52-2.35,88-10.92,131.78Z"
                    />
                </mask>
                <image xmlnsXlink="http://www.w3.org/1999/xlink" xlinkHref="/omar.png" mask="url(#shapeImg2)" className="w-full" />
            </motion.svg>
            <motion.svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 594 793.43" className='shape transform'>
                <motion.path
                    d="M16.9,792.93c.77-15.16-6.26-28.15-10.64-42C7.41,737.1,3.06,725.8.5,712.89c4.33-44.84,13.94-89.32,18-134.71,4.71-41.35,21-81.22,31.1-121.51,3.07-17.63-2-36.87,14.8-47.66,17.67-9.39,26.8-31.76,36.27-48.53,36.07-34.29,121-29.1,118.1-91.57.5-7.35,8.57-12.06,13.64-17.14s18.19-2.5,13.21-12.69c-5.75-10.27-7.89-22-9.52-33.55-18.92-12.73-26.27-37.28-24.44-59.93.48-9.49,9.69-1.57,13.59-3.15-2.28-23.64-6.83-50.61,1.89-73,9.83-23.42,24.32-46.51,45-59.28C293.17,4.26,316-4.3,339.29,3.85c4.93,1.45,10.84,4.21,11.14,10,2.34,4,8.47,2.58,6.6,9.28,9.28,1.45,13.15,9.71,16.34,18.68C396.09,68.57,402.82,104,397.14,139c-.16,7.49,6.82-.11,9.57-.24,7.4,7.72,3.36,24.44,1.68,34.63-1.09,19-22.65,21.58-23.2,38.86C354.46,319,432.21,311.77,505.61,344c32.6,32.45,46.16,77.91,57.35,122,17.12,72.71,38.85,148.31,27.29,222.06-5.93,14.27,4.59,28.47.52,43.59,3.51,9.85-3.79,19.27-4.29,28.84-1.94,10.35,2.84,21.72-1.65,32.46H491.41c-5.41-43.63,1.49-89.2-14.71-131.78-17.73,42.52-2.35,88-10.92,131.78Z"
                    variants={polyShapeAnimation}
                    initial="hidden"
                    animate={controls}
                    transition={{
                        default: { duration: 2, ease: "easeInOut" },
                        fill: { delay: 2, duration: .5, ease: [1, 0, 0.8, 1] }
                    }}
                />
            </motion.svg>
        </div>
    )
}