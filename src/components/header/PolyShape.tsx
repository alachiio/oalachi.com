"use client";
import { imageAnimation, polyShapeAnimation } from "@/utils/animations";
import { motion, useAnimation, useInView } from "framer-motion";
import { useEffect, useRef } from "react";

export default function PolyShape() {
    const controls = useAnimation();
    const refShape = useRef(null)
    const shapeInView = useInView(refShape, { once: true });
    useEffect(() => {
        if (shapeInView) {
            controls.start('visible');
        }
    }, [controls, shapeInView]);
    return (
        <div className='personal-photo w-full hidden lg:flex'>
            <motion.svg ref={refShape} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 938.55 849.1" className='absolute w-full !z-30 top-0'
                variants={imageAnimation} initial="hidden" animate={controls} transition={{
                    default: { duration: 1, delay: 1, ease: "easeInOut" }
                }}>
                <mask id="shapeImg">
                    <path
                        d="M350,398.38c-1.61-5.71-7-11.44-6.4-17.08-6.1-12.66-8.17-25.82-11.09-39.32-37.61-11.22-44.53-56.8-52-90.43-4.34-27.83,9.14-12.61,16-24.76-3.18-50-20.91-112.24,17.5-148-4-3.85.5-2.07-1.15-4.31,1.11-1.85,4.06-5.89,7.42-5.67-1.51-4.29,3.23-5.72,1.45-9.19,2.26.23,3.6-1,5.09-2.14-2.33-2.37.51-4-.7-6.75,2.13-.14,2.36-2.08,3.74-3.12.29.17.51.43.77.59.59.16-1.82-1,0-1.12.37-.24,1-.1,1.19-.62,10.13-5.6,17.94-16.81,27.62-24C380.22,10.05,405,8.66,427.4,2.83,446.5,1.05,468.15-2,486.81,4.24c2.59,1.67,6.22,1.42,8.76,2.54,2.4,7.78,14.86,3.92,19.69,9.38,3.84,1.22,7.51,4.28,10,6.65,6.23.82,8.91,5.87,12.93,9.38,5.61,3.82,12.87,5.14,17,11-1,4.51,5.7,7.14,9.24,10.13,2.61,2.19,4.35,7.56,8.18,6.51-2.76,6.2,5.27,8.79,6.38,15.14,3.77,3.55,5.88,7.56,4.8,10.94,4.6,8,7.72,16.87,11.21,25.27h0a7.2,7.2,0,0,0,1.19,2.92c-1.88,9.46,4.51,17.06,6.05,25.85-3.58,0,0,1.47-2.68,4.21,2.28,15.16,1.29,31.27,2.1,47.22,3.38,5.77-1.68,23.33,7.71,20.86,21.83,2.21,13.95,57.51,8.42,73.72-2.41,20.67-24.92,26.62-31.24,42.78-5,44.8-3.68,90.19,25,127.14,5.53,9.67,12.55,23.62,20.28,29.34,41.62,4.25,77.82,31.93,119.94,38.54,42.73,11.69,88,24.28,124,50.55,44.24,84.45,53,180.95,62.29,274.25H.63C7.37,820.29,38,801.09,53.58,781c5.51-45.46,31.35-89.43,57.76-126.58,3.92-17.77,4-40.58,24.62-48.69,41-36.17,90.34-62.46,146.83-57.09,19.72-17.71,41.49-32.94,64.69-43.51C356.58,468,377.63,433,350,398.38Z"
                    />
                </mask>
                <image xmlnsXlink="http://www.w3.org/1999/xlink" xlinkHref="/omar_2.png" mask="url(#shapeImg)" className="w-full dark:grayscale" />
            </motion.svg>
            <motion.svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 938.55 849.1" className='shape transform'>
                <motion.path
                    d="M350,398.38c-1.61-5.71-7-11.44-6.4-17.08-6.1-12.66-8.17-25.82-11.09-39.32-37.61-11.22-44.53-56.8-52-90.43-4.34-27.83,9.14-12.61,16-24.76-3.18-50-20.91-112.24,17.5-148-4-3.85.5-2.07-1.15-4.31,1.11-1.85,4.06-5.89,7.42-5.67-1.51-4.29,3.23-5.72,1.45-9.19,2.26.23,3.6-1,5.09-2.14-2.33-2.37.51-4-.7-6.75,2.13-.14,2.36-2.08,3.74-3.12.29.17.51.43.77.59.59.16-1.82-1,0-1.12.37-.24,1-.1,1.19-.62,10.13-5.6,17.94-16.81,27.62-24C380.22,10.05,405,8.66,427.4,2.83,446.5,1.05,468.15-2,486.81,4.24c2.59,1.67,6.22,1.42,8.76,2.54,2.4,7.78,14.86,3.92,19.69,9.38,3.84,1.22,7.51,4.28,10,6.65,6.23.82,8.91,5.87,12.93,9.38,5.61,3.82,12.87,5.14,17,11-1,4.51,5.7,7.14,9.24,10.13,2.61,2.19,4.35,7.56,8.18,6.51-2.76,6.2,5.27,8.79,6.38,15.14,3.77,3.55,5.88,7.56,4.8,10.94,4.6,8,7.72,16.87,11.21,25.27h0a7.2,7.2,0,0,0,1.19,2.92c-1.88,9.46,4.51,17.06,6.05,25.85-3.58,0,0,1.47-2.68,4.21,2.28,15.16,1.29,31.27,2.1,47.22,3.38,5.77-1.68,23.33,7.71,20.86,21.83,2.21,13.95,57.51,8.42,73.72-2.41,20.67-24.92,26.62-31.24,42.78-5,44.8-3.68,90.19,25,127.14,5.53,9.67,12.55,23.62,20.28,29.34,41.62,4.25,77.82,31.93,119.94,38.54,42.73,11.69,88,24.28,124,50.55,44.24,84.45,53,180.95,62.29,274.25H.63C7.37,820.29,38,801.09,53.58,781c5.51-45.46,31.35-89.43,57.76-126.58,3.92-17.77,4-40.58,24.62-48.69,41-36.17,90.34-62.46,146.83-57.09,19.72-17.71,41.49-32.94,64.69-43.51C356.58,468,377.63,433,350,398.38Z"
                    variants={polyShapeAnimation}
                    initial="hidden"
                    animate={controls}
                    transition={{
                        default: { duration: 2, ease: "easeInOut" },
                        fill: { delay: 2, duration: .5, ease: [1, 0, 0.8, 1] }
                    }}
                />
            </motion.svg>
        </div>
    )
}